@using KCD2.ModForge.Shared.Adapter
@if (EditingModItem is not null)
{
	<MudGrid Spacing="5" Justify="Justify.SpaceBetween" Class="pa-4">
		<MudItem lg="12">
			<MudGrid Justify="Justify.SpaceBetween" Spacing="2">

				<MudItem xs="6" sm="6" md="6" lg="6">
					<MudButton Class="button-prominent" Style="font-size: 0.6rem !important; padding: 0.2rem 0.4rem !important;" FullWidth="true" Variant="Variant.Filled" Color="Color.Primary" OnClick="AddAllLanguages">All</MudButton>
				</MudItem>

				<MudItem xs="6" sm="6" md="6" lg="6">
					<MudButton Class="button-prominent" Style="font-size: 0.6rem !important; padding: 0.2rem 0.4rem !important;" FullWidth="true" Variant="Variant.Filled" Color="Color.Primary" OnClick="RemoveAllLanguages">Clear</MudButton>
				</MudItem>

				@foreach (var languageKey in LocalizationAdapter.LanguageMap.Values)
				{
					<MudItem xs="3" sm="3" md="3" lg="3">
						<MudButton Class="@(SelectedLanguageCodes.Contains(languageKey) ? "button-prominent" : "button-neutral")"
								   Style="font-size: 0.6rem !important; padding: 0.2rem 0.4rem !important;" FullWidth="true"
								   Variant="@(SelectedLanguageCodes.Contains(languageKey) ? Variant.Filled : Variant.Outlined)"
								   OnClick="@(() => AddLanguageKey(languageKey))"
								   Size="Size.Small">
							@(LocalizationAdapter.LanguageMap.FirstOrDefault(x => x.Value == languageKey).Key)
						</MudButton>
					</MudItem>
				}


			</MudGrid>
		</MudItem>

		<MudDivider Class="mt-4" />


		@if (SelectedLanguageCodes.Count == 0)
		{
			<MudItem>
				<MudText Color="Color.Secondary">No language picked</MudText>
			</MudItem>
		}
		else
		{
			@foreach (var code in SelectedLanguageCodes)
			{
				<MudItem xs="12" sm="12" md="12" lg="12">
							<MudText Class="pl-2">@(LocalizationAdapter.LanguageMap.FirstOrDefault(x => x.Value == code).Key)</MudText>
					<MudPaper Class="attribute-card" Outlined="true" Elevation="0">

						@if (editMode == false)
						{
							<MudText Typo="Typo.subtitle2">@EditingModItem.Localization.GetName(code)</MudText>
							<MudText Typo="Typo.body2">@EditingModItem.Localization.GetDescription(code)</MudText>
							<MudText Typo="Typo.body2">@EditingModItem.Localization.GetLoreDescription(code)</MudText>
						}
						else
						{
							<MudTextField T="string"
										  Immediate="true"
										  @bind-Value="name[code][NameKey]"
										  OnKeyUp="@(() => EditingModItem.Localization.SetName(code, NameKey, name[code][NameKey]))"
										  HelperText="@OriginalModItem.Localization.GetName(code)"
										  Margin="Margin.Dense"
										  Variant="Variant.Outlined" />
							<MudTextField T="string"
										  Immediate="true"
										  @bind-Value="description[code][DescKey]"
										  OnKeyUp="@(() => EditingModItem.Localization.SetDescription(code, DescKey, description[code][DescKey]))"
										  HelperText="@OriginalModItem.Localization.GetDescription(code)"
										  Margin="Margin.Dense"
										  Variant="Variant.Outlined" />
							<MudTextField T="string"
										  Immediate="true"
										  @bind-Value="loreDescription[code][LoreKey]"
										  OnKeyUp="@(() => EditingModItem.Localization.SetLoreDescription(code, LoreKey, loreDescription[code][LoreKey]))"
										  HelperText="@OriginalModItem.Localization.GetLoreDescription(code)"
										  Margin="Margin.Dense"
										  Variant="Variant.Outlined" />
						}

					</MudPaper>
				</MudItem>
			}
		}
	</MudGrid>
}

